<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>我的信息 - shop</title>
    <meta name="Keywords" content="java,shopjava"/>
    <meta name="description" content="在shop中找到了29910件java的类似商品，其中包含了“图书”，“电子书”，“教育音像”，“骑行运动”等类型的java的商品。"/>
    <link rel="stylesheet" type="text/css" href="css/base.css" media="all"/>
    <link rel="stylesheet" type="text/css" href="css/myjd.common.css" media="all"/>
    <link rel="stylesheet" type="text/css" href="css/myjd.info.css" media="all"/>
</head>
<body>
<script type="text/javascript" src="js/jquery-1.6.4.js"></script>
<script type="text/javascript" src="js/base-2011.js" charset="utf-8"></script>
<script type="text/javascript" src="js/address.js"></script>


<div id="container">
    <div class="w">
        <div id="main">
            <div class="g-0">
                <div id="content" class="c-3-5">
                    <div class="mod-main">
                        <div class="mt">
                            <ul class="extra-l">
                                <li class="fore-1"><a class="curr" href="http://localhost:8787/my-info.html">基本信息</a>
                                </li>
                                <li class="fore-2"><a href="my-info-img.html">头像照片</a></li>
                                <li class="fore-3"><a href="my-info-more.html">更多个人信息</a></li>

                            </ul>
                        </div>
                        <div class="mc">
                            <div class="user-set userset-lcol">
                                <div class="form">
                                    <form id="tf" action="http://localhost:8765/userMessage/addMessage"
                                          method="post">
                                        <div class="item">
                                            <span class="label"><em>*</em>昵称：</span>
                                            <div class="fl">
                                                <input type="text" class="itxt" maxlength="20" id="nickName"
                                                       name="nickName"
                                                       value="">
                                                <div class="clr"></div>
                                                <div class="prompt-06"><span id="nickName_msg"></span></div>
                                            </div>
                                        </div>
                                        <div class="item">
                                            <span class="label"><em>*</em>性别：</span>
                                            <div class="fl">
                                                <input id="gender1" type="radio" name="gender" class="jdradio"
                                                       value="男"><label
                                                    class="mr10">男</label>
                                                <input id="gender2" type="radio" name="gender" class="jdradio"
                                                       value="女"><label
                                                    class="mr10">女</label>
                                                <input id="gender3" type="radio" name="gender" class="jdradio"
                                                       value="保密"><label
                                                    class="mr10">保密</label>
                                            </div>
                                        </div>
                                        <div class="item">
                                            <span class="label">生日：</span>
                                            <div class="fl birthday-info">

                                                <div id="year" style="float: left">
                                                    <select class="selt selt1" id="birthdayYear">
                                                        <option value="0" disabled="" selected="selected">请选择：</option>
                                                        <option value="2018">2018</option>
                                                        <option value="2017">2017</option>
                                                        <option value="2016">2016</option>
                                                        <option value="2015">2015</option>
                                                        <option value="2014">2014</option>
                                                        <option value="2013">2013</option>
                                                        <option value="2012">2012</option>
                                                        <option value="2011">2011</option>
                                                        <option value="2010">2010</option>
                                                        <option value="00后">00后</option>
                                                        <option value="2009">2009</option>
                                                        <option value="2008">2008</option>
                                                        <option value="2007">2007</option>
                                                        <option value="2006">2006</option>
                                                        <option value="2005">2005</option>
                                                        <option value="2004">2004</option>
                                                        <option value="2003">2003</option>
                                                        <option value="2002">2002</option>
                                                        <option value="2001">2001</option>
                                                        <option value="2000">2000</option>
                                                        <option value="90后">90后</option>
                                                        <option value="1999">1999</option>
                                                        <option value="1998">1998</option>
                                                        <option value="1997">1997</option>
                                                        <option value="1996">1996</option>
                                                        <option value="1995">1995</option>
                                                        <option value="1994">1994</option>
                                                        <option value="1993">1993</option>
                                                        <option value="1992">1992</option>
                                                        <option value="1991">1991</option>
                                                        <option value="1990">1990</option>
                                                        <option value="80后">80后</option>
                                                        <option value="1989">1989</option>
                                                        <option value="1988">1988</option>
                                                        <option value="1987">1987</option>
                                                        <option value="1986">1986</option>
                                                        <option value="1985">1985</option>
                                                        <option value="1984">1984</option>
                                                        <option value="1983">1983</option>
                                                        <option value="1982">1982</option>
                                                        <option value="1981">1981</option>
                                                        <option value="1980">1980</option>
                                                        <option value="70后">70后</option>
                                                        <option value="1979">1979</option>
                                                        <option value="1978">1978</option>
                                                        <option value="1977">1977</option>
                                                        <option value="1976">1976</option>
                                                        <option value="1975">1975</option>
                                                        <option value="1974">1974</option>
                                                        <option value="1973">1973</option>
                                                        <option value="1972">1972</option>
                                                        <option value="1971">1971</option>
                                                        <option value="1970">1970</option>
                                                        <option value="60后">60后</option>
                                                        <option value="1969">1969</option>
                                                        <option value="1968">1968</option>
                                                        <option value="1967">1967</option>
                                                        <option value="1966">1966</option>
                                                        <option value="1965">1965</option>
                                                        <option value="1964">1964</option>
                                                        <option value="1963">1963</option>
                                                        <option value="1962">1962</option>
                                                        <option value="1961">1961</option>
                                                        <option value="1960">1960</option>
                                                        <option value="50后">50后</option>
                                                        <option value="1959">1959</option>
                                                        <option value="1958">1958</option>
                                                        <option value="1957">1957</option>
                                                        <option value="1956">1956</option>
                                                        <option value="1955">1955</option>
                                                        <option value="1954">1954</option>
                                                        <option value="1953">1953</option>
                                                        <option value="1952">1952</option>
                                                        <option value="1951">1951</option>
                                                        <option value="1950">1950</option>
                                                        <option value="40后">40后</option>
                                                        <option value="1949">1949</option>
                                                        <option value="1948">1948</option>
                                                        <option value="1947">1947</option>
                                                        <option value="1946">1946</option>
                                                        <option value="1945">1945</option>
                                                        <option value="1944">1944</option>
                                                        <option value="1943">1943</option>
                                                        <option value="1942">1942</option>
                                                        <option value="1941">1941</option>
                                                        <option value="1940">1940</option>
                                                        <option value="30后">30后</option>
                                                        <option value="1939">1939</option>
                                                        <option value="1938">1938</option>
                                                        <option value="1937">1937</option>
                                                        <option value="1936">1936</option>
                                                        <option value="1935">1935</option>
                                                        <option value="1934">1934</option>
                                                        <option value="1933">1933</option>
                                                        <option value="1932">1932</option>
                                                        <option value="1931">1931</option>
                                                        <option value="1930">1930</option>
                                                    </select>
                                                    <label class="ml5 mr5">年</label>
                                                </div>
                                                <div id="month" style="float: left">
                                                    <select class="selt selt1" id="birthdayMonth">
                                                        <option value="0" disabled="" selected="selected">请选择：</option>
                                                        <option value="1">1</option>
                                                        <option value="2">2</option>
                                                        <option value="3">3</option>
                                                        <option value="4">4</option>
                                                        <option value="5">5</option>
                                                        <option value="6">6</option>
                                                        <option value="7">7</option>
                                                        <option value="8">8</option>
                                                        <option value="9">9</option>
                                                        <option value="10">10</option>
                                                        <option value="11">11</option>
                                                        <option value="12">12</option>
                                                    </select>
                                                    <label class="ml5 mr5">月</label>
                                                </div>
                                                <div id="day" style="float: left">
                                                    <select class="selt selt1" id="birthdayDay">
                                                        <option value="01">1</option>
                                                        <option value="02">2</option>
                                                        <option value="03">3</option>
                                                        <option value="04">4</option>
                                                        <option value="05">5</option>
                                                        <option value="06">6</option>
                                                        <option value="07">7</option>
                                                        <option value="08">8</option>
                                                        <option value="09">9</option>
                                                        <option value="10">10</option>
                                                        <option value="11">11</option>
                                                        <option value="12">12</option>
                                                        <option value="13">13</option>
                                                        <option value="14">14</option>
                                                        <option value="15">15</option>
                                                        <option value="16">16</option>
                                                        <option value="17">17</option>
                                                        <option value="18">18</option>
                                                        <option value="19">19</option>
                                                        <option value="20">20</option>
                                                        <option value="21">21</option>
                                                        <option value="22">22</option>
                                                        <option value="23">23</option>
                                                        <option value="24">24</option>
                                                        <option value="25">25</option>
                                                        <option value="26">26</option>
                                                        <option value="27">27</option>
                                                        <option value="28">28</option>
                                                    </select>
                                                    <label class="ml5 mr5">日</label>
                                                </div>
                                                <input name="birthday" id="inp" style="display: none" value="">
                                                <span class="ftx03">填生日有惊喜哦~</span>
                                            </div>
                                        </div>

                                        <div class="item">
                                            <span class="label">兴趣爱好：</span>
                                            <div class="fl interest-list">
                                                <p>请选择您感兴趣的分类，给您最精准的推荐</p>
                                                <input type="checkbox" name="hobbies" id="hobby1" class="jdradio"
                                                       value="图书/音像/数字商品"><label>图书/音像/数字商品</label><br>
                                                <input type="checkbox" name="hobbies" id="hobby2" class="jdradio"
                                                       value="家用电器"><label>家用电器</label><br>
                                                <input type="checkbox" name="hobbies" id="hobby3" class="jdradio"
                                                       value="手机/数码"><label>手机/数码</label><br>
                                                <input type="checkbox" name="hobbies" id="hobby4" class="jdradio"
                                                       value="电脑/办公"><label>电脑/办公</label><br>
                                                <input type="checkbox" name="hobbies" id="hobby5" class="jdradio"
                                                       value="家居/家具/家装/厨具"><label>家居/家具/家装/厨具</label><br>
                                                <input type="checkbox" name="hobbies" id="hobby6" class="jdradio"
                                                       value="服饰内衣/珠宝首饰"><label>服饰内衣/珠宝首饰</label><br>
                                                <input type="checkbox" name="hobbies" id="hobby7" class="jdradio"
                                                       value="个护化妆"><label>个护化妆</label><br>
                                                <input type="checkbox" name="hobbies" id="hobby8" class="jdradio"
                                                       value="鞋靴/箱包/钟表/奢侈品"><label>鞋靴/箱包/钟表/奢侈品</label><br>
                                                <input type="checkbox" name="hobbies" id="hobby9" class="jdradio"
                                                       value="运动健康"><label>运动健康</label><br>
                                                <input type="checkbox" name="hobbies" id="hobby10" class="jdradio"
                                                       value="汽车用品"><label>汽车用品</label><br>
                                                <input type="checkbox" name="hobbies" id="hobby11" class="jdradio"
                                                       value="母婴/玩具乐器"><label>母婴/玩具乐器</label><br>
                                                <input type="checkbox" name="hobbies" id="hobby12" class="jdradio"
                                                       value="食品饮料/保健食品"><label>食品饮料/保健食品</label><br>
                                                <input type="checkbox" name="hobbies" id="hobby13" class="jdradio"
                                                       value="彩票/旅行/充值/票务"><label>彩票/旅行/充值/票务</label>

                                            </div>
                                        </div>
                                        <div class="item">
                                            <span class="label">邮箱：</span>
                                            <div class="fl">
                                                <div>
                                                    <strong> <input id="email" name="email" value="">
                                                        <div>
                                                            <span id="text"
                                                                  style="display: none;color: red">输入邮箱错误</span>
                                                        </div>
                                                    </strong>
                                                </div>
                                            </div>

                                            <div class="clr"></div>
                                        </div>

                                        <div class="item">
                                            <span class="label">真实姓名：</span>
                                            <div class="fl">
                                                <input type="text" class="itxt" maxlength="20" name="realName"
                                                       id="realName"
                                                       value="">
                                                <div class="clr"></div>
                                                <div class="prompt-06"><span id="realName_msg"></span></div>
                                            </div>
                                        </div>
                                        <div class="item">
                                            <span class="label">所在地：</span>
                                            <div class="fl">
                                                <select id="cmbProvince"></select>
                                                <select id="cmbCity"></select>
                                                <select id="cmbArea"></select>

                                                <input id="address" type="text" value="">
                                                <input id="all" name="address" style="display: none">

                                                <div class="prompt-06"><span id="address_msg"></span></div>
                                            </div>
                                        </div>
                                        <div class="item">
                                            <span class="label">&nbsp;</span>
                                            <div class="fl">
                                                <input id="code" value="100294" style="display:none">
                                                <input id="rkey"
                                                       value="736e6f5f315f67657455736572496e666f6468313839313030323934"
                                                       style="display:none">
                                                <input id="input" type="button" value="提交">

                                            </div>
                                        </div>
                                    </form>
                                </div>
                            </div>
                            <div id="user-info">
                                <div class="u-pic">
                                    <img id="useImage" alt="用户头像" src="">
                                    <div class="mask"></div>
                                    <div class="face-link-box"></div>
                                    <a href="http://i.jd.com/user/userinfo/showImg.html" class="face-link">修改头像</a>
                                </div>
                                <div class="info-m">
                                    <div><b>用户名：dh189</b></div>
                                    <div class="u-level">
										<span class="rank r4">
											<s></s><span target="_blank">金牌会员</span>
										</span>
                                    </div>
                                    <div class="shop-level">购物行为评级：<span><a target="_blank"
                                                                            href="http://help.jd.com/help/question-57.html#help2173">
										<s id="userCredit" class="rank-sh rank-sh01 rank-sh02"></s></a></span></div>
                                    <div>会员类型：个人用户</div>
                                </div>
                            </div>
                            <div class="fr ac" style="width:280px;">
                                注：修改手机和邮箱请到<span>账户安全</span>
                            </div>
                            <div class="clr"></div>
                        </div>
                    </div>
                </div>
            </div>
            <div id="left" class="g-3-5 c-0">
                <!--js 加载异步加载的左侧菜单 -->
                <div id="menu"><h3>我的交易</h3>
                    <dl class="fore1">
                        <dt><a target="_blank" clstag="homepage|keycount|home2013|hdd" id="_MYJD_ordercenter"
                               href="http://order.jd.com/center/list.action" class="curr">我的订单</a></dt>
                    </dl>
                    <dl class="fore2">
                        <dt><a target="_blank" clstag="homepage|keycount|home2013|hyushou" id="_MYJD_yushou"
                               href="http://yushou.jd.com/member/qualificationList.action">我的预售</a></dt>
                    </dl>
                    <dl class="fore3">
                        <dt><a target="_blank" clstag="homepage|keycount|home2013|hbdsh" id="_MYJD_locallife"
                               href="http://life.jd.com/localOrder/iniOrder.do">我的本地生活</a></dt>
                    </dl>
                    <dl class="fore4">
                        <dt><a target="_blank" clstag="homepage|keycount|home2013|hdqs" id="_MYJD_ding"
                               href="http://ding.jd.com/plan/showPlans.action">我的定期送</a></dt>
                    </dl>
                    <dl class="fore5">
                        <dt><a target="_blank" clstag="homepage|keycount|home2013|htg" id="_MYJD_tuan"
                               href="http://tuan.jd.com/order/index.php">我的团购</a></dt>
                    </dl>
                    <dl class="fore6">
                        <dt><a target="_blank" clstag="homepage|keycount|home2013|hjg" id="_MYJD_protection"
                               href="http://jiabao.jd.com/protecting">价格保护</a></dt>
                    </dl>
                    <dl class="fore7">
                        <dt class="hc"><b></b><a target="_blank" id="_MYJD_gz" href="#none">我的关注</a></dt>
                        <dd class="fore1">
                            <div class="item" id="_MYJD_product"><a target="_blank"
                                                                    clstag="homepage|keycount|home2013|hgz"
                                                                    href="http://t.jd.com/home/follow">关注的商品</a></div>
                        </dd>
                        <dd class="fore2">
                            <div class="item" id="_MYJD_vender"><a target="_blank"
                                                                   clstag="homepage|keycount|home2013|hdp"
                                                                   href="http://t.jd.com/vender/followVenderList.action">关注的店铺</a>
                            </div>
                        </dd>
                        <dd class="fore3">
                            <div class="item" id="_MYJD_activity"><a target="_blank"
                                                                     clstag="homepage|keycount|home2013|hhd"
                                                                     href="http://t.jd.com/activity/followActivityList.action">关注的活动</a>
                            </div>
                        </dd>
                        <dd class="fore4 last ">
                            <div class="item" id="_MYJD_history"><a target="_blank"
                                                                    clstag="homepage|keycount|home2013|hll"
                                                                    href="http://my.jd.com/history/list.html">浏览历史&nbsp;<img
                                    width="24" height="11" src="/images/myjd-new-ico.png"></a></div>
                        </dd>
                    </dl>
                    <dl class="fore8">
                        <dt class="hc"><b></b><a target="_blank" id="_MYJD_zc" href="#none">我的资产</a></dt>
                        <dd class="fore1">
                            <div class="item" id="_MYJD_cashbox"><a target="_blank"
                                                                    clstag="homepage|keycount|home2013|hjk"
                                                                    href="http://jinku.pay.jd.com/xjk/income.action">我的小金库</a>
                            </div>
                        </dd>
                        <dd class="fore2">
                            <div class="item" id="_MYJD_credit"><a clstag="homepage|keycount|home2013|hbt" tag="213"
                                                                   href="http://baitiao.jd.com/creditUser/record">shop白条</a>&nbsp;
                            </div>
                        </dd>
                        <dd class="fore3">
                            <div class="item" id="_MYJD_tx"><a target="_blank" clstag="homepage|keycount|home2013|htx"
                                                               href="http://mobile.jd.com/yyswt/myjd.do">shop通信</a>
                            </div>
                        </dd>
                        <dd class="fore4">
                            <div class="item" id="_MYJD_balance"><a target="_blank"
                                                                    clstag="homepage|keycount|home2013|hye"
                                                                    href="http://mymoney.jd.com/finance/recently.action">余额</a>
                            </div>
                        </dd>
                        <dd class="fore5">
                            <div class="item" id="_MYJD_ticket"><a target="_blank"
                                                                   clstag="homepage|keycount|home2013|hyh"
                                                                   href="http://quan.jd.com/user_quan.action">优惠券</a>
                            </div>
                        </dd>
                        <dd class="fore6">
                            <div class="item" id="_MYJD_card"><a target="_blank" clstag="homepage|keycount|home2013|he"
                                                                 href="http://giftcard.jd.com/giftcard/index.action">shop卡/E卡</a>
                            </div>
                        </dd>
                        <dd class="fore7 last">
                            <div class="item" id="_MYJD_bean"><a target="_blank" clstag="homepage|keycount|home2013|hjd"
                                                                 href="http://bean.jd.com/myJingBean/list">京豆</a></div>
                        </dd>
                    </dl>
                    <dl class="fore9 last ">
                        <dt class="hc"><b></b><a target="_blank" id="_MYJD_fw" href="#none">客户服务</a></dt>
                        <dd class="fore1">
                            <div class="item" id="_MYJD_repair"><a target="_blank"
                                                                   clstag="homepage|keycount|home2013|hfx"
                                                                   href="http://myjd.jd.com/repair/orderlist.action">返修退换货</a>
                            </div>
                        </dd>
                        <dd class="fore2">
                            <div class="item" id="_MYJD_refundment"><a target="_blank"
                                                                       clstag="homepage|keycount|home2013|hqx"
                                                                       href="http://rps.fm.jd.com/rest/refund/refundList">取消订单记录</a>
                            </div>
                        </dd>
                        <dd class="fore3 last ">
                            <div class="item" id="_MYJD_complaint"><a target="_blank"
                                                                      clstag="homepage|keycount|home2013|htx"
                                                                      href="http://myjd.jd.com/opinion/orderList.action">我的投诉</a>
                            </div>
                        </dd>
                    </dl>
                </div>
                <div id="da-game" class="da-box m"><a
                        href="http://c.nfa.jd.com/adclick?sid=14&amp;cid=720&amp;aid=4497&amp;bid=0&amp;unit=85943&amp;advid=131939&amp;guv=&amp;url=http://wan.jd.com/yeyou/play.html?gameId=86&amp;gateWayId=s40"><img
                        width="100%" src="/images/547e6a57N75c2f016.gif" alt=""></a></div>
                <div id="da-home" class="da-box"><a
                        href="http://c.nfa.jd.com/adclick?sid=2&amp;cid=102&amp;aid=413&amp;bid=8305&amp;unit=65429&amp;advid=166662&amp;guv=&amp;url=http://vivoshop.jd.com"
                        target="_blank"><img width="100%" height="100%" alt="" app="image:poster"
                                             src="/images/549d03d0N59b1f026.jpg"></a></div>
            </div>
            <span class="clr"></span>
        </div>
    </div>
</div>


<script type="text/javascript">
    addressInit('cmbProvince', 'cmbCity', 'cmbArea');

    $(function () {
        var setting = {
            url: 'http://localhost:8765/userMessage/findByUid',
            headers: {
                "Authentication": token
            },
            method: 'get'
        };
        $.ajax(setting).done(requestFinished);

        function requestFinished(resp) {

            $('#nickName').val(resp.nickName);
            $('#email').val(resp.email);
            $('#realName').val(resp.realName);


            var hobbies = resp.hobbies;
            if (hobbies != null) {
                var hobby = hobbies.split(",");
                for (var i = 0; i < hobby.length; i++) {
                    $("input[name='hobbies']").each(function () {

                        if ($(this).val() === hobby[i]) {
                            $(this).attr("checked", "checked");
                        }
                    })
                }
            }


            var useImage = $('#useImage');
            useImage.attr("src", resp.imagePath);
            var birthday = resp.birthday;

            var arr = birthday.split('-');
            for (var i = 0; i < arr.length; i++) {
                $('#birthdayYear').val(arr[0]);
                $('#birthdayMonth').val(arr[1]);
                $('#birthdayDay').val(arr[2]);
            }

            if (resp.gender == '男') {
                $('#gender1').prop('checked', 'checked')
            } else if (resp.gender == '女') {
                $('#gender2').prop('checked', 'checked')
            } else if (resp.gender == '不详') {
                $('#gender3').prop('checked', 'checked')

            }



            var result = resp.address.split("/");
            console.log(result);

            console.log(result[0]);
            $('#cmbProvince').val(result[0]);
            $('#cmbCity option').val(result[1]).text(result[1]);
            $('#cmbArea option').val(result[2]).text(result[2]);
            $('#address').val(result[3]);
        }

        $('#email').blur(function () {
            var email = $('#email').val();
            var re = /^[a-zA-Z0-9_.-]+@[a-zA-Z0-9-]+(\.[a-zA-Z0-9-]+)*\.[a-zA-Z0-9]{2,6}$/;
            if (!re.test(email)) {
                $('#text').css("display", 'inline')
            } else {
                $('#text').css("display", 'none')
            }
        });
    });

    var token = window.localStorage.getItem("token");


    $('#input').click(function () {

        var year = $('#birthdayYear').val();
        var month = $('#birthdayMonth').val();
        var day = $('#birthdayDay').val();
        $('#inp').val(year + "-" + month + "-" + day);

        var pro = $('#cmbProvince').val();
        var city = $('#cmbCity').val();
        var area = $('#cmbArea').val();
        var adress = $('#address').val();
        $('#all').val(pro + "/" + city + "/" + area + "/" + adress);


        $.ajax({
            type: "POST",
            contentType: "application/x-www-form-urlencoded",
            url: "http://localhost:8765/userMessage/addMessage",
            headers: {
                "Authentication": token
            },
            data: $('#tf').serialize(),
            success: function (result) {
                console.log(result);
                if (result) {
                    alert("提交成功")
                }
                ;
            },
            error: function () {
                alert("提交失败")
            }
        });
    });

</script>
</body>
</html>