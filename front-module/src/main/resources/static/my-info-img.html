<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>我的信息 - shop</title>
    <meta name="Generator" content="EditPlus®">
    <meta name="Author" content="">
    <meta name="Keywords" content="">
    <meta name="Description" content="">
    <meta name="Keywords" content="java,shopjava"/>
    <meta name="description" content="在shop中找到了29910件java的类似商品，其中包含了“图书”，“电子书”，“教育音像”，“骑行运动”等类型的java的商品。"/>
    <link rel="stylesheet" type="text/css" href="../css/base.css" media="all"/>
    <link rel="stylesheet" type="text/css" href="../css/myjd.common.css" media="all"/>
    <link rel="stylesheet" type="text/css" href="../css/myjd.info.css" media="all"/>
    <script type="text/javascript" src="js/jquery-1.6.4.js"></script>

</head>
<body>
<script type="text/javascript" src="js/base-2011.js" charset="utf-8"></script>


<div id="container">
    <div class="w">
        <div id="main">
            <div class="g-0">
                <div id="content" class="c-3-5">
                    <div class="mod-main">
                        <div class="mt">
                            <ul class="extra-l">
                                <li id="myInfo" class="fore-1"><a href="http://localhost:8787/my-info.html">基本信息</a>
                                </li>
                                <li class="fore-2"><a href="http://localhost:8787/my-info-img.html">头像照片</a></li>
                                <li class="fore-3"><a href="http://localhost:8787/my-info-more.html">更多个人信息</a></li>
                            </ul>
                        </div>
                        <form id="tf" action="http://localhost:8765/userMessage/upFile" method="post"
                              enctype="multipart/form-data">
                            <div class="mc update-face-cont">
                                <div class="update-lcol">
                                    <div class="mb10">
                                        <input id="SWFUpload_0" type="file" name="image"
                                               accept="image/gif, image/jpeg, image/jpg, image/png, image/bmp">

                                        <img id="loading" class="float:left" src="/images/loading.gif"
                                             style="display:none">
                                        <div id="messages"
                                             style="border:1px solid #DB9A9A;background-color:#FFE8E8;color:#CC0000;text-align: left;display:none"></div>
                                        <input id="btnCancel" type="hidden">
                                        <div class="ftx03">仅支持JPG、GIF、PNG、JPEG、BMP格式，文件小于4M</div>
                                    </div>
                                    <div class="img-b-cont img-cont ">
                                        <!--<div class="tip">编辑预览区</div>-->
                                        <div class="img-b">
                                            <img id="bigImage" alt="" width="150" height="150"
                                                 src="/images/defaultImgs/1.jpg">
                                        </div>
                                    </div>
                                    <div class="smt"><h3>推荐头像</h3></div>
                                    <div class="smc face-list">
                                        <ul class="imgUl">
                                            <li value="1"><img
                                                    src="http://35.220.246.127:8080/group1/M00/00/04/CqoAAlvrjieADWzfAABCWUSx8zM509.jpg"
                                                    alt="" width="50"
                                                    height="50"><b></b></li>
                                            <li value="2"><img
                                                    src="http://35.220.246.127:8080/group1/M00/00/04/CqoAAlvrjlSACuHhAABNYeG83T0070.jpg"
                                                    alt="" width="50"
                                                    height="50"><b></b></li>
                                            <li value="3"><img
                                                    src="http://35.220.246.127:8080/group1/M00/00/04/CqoAAlvrjmmAHrp-AABD8VPadts131.jpg"
                                                    alt="" width="50"
                                                    height="50"><b></b></li>
                                            <li value="4"><img
                                                    src="http://35.220.246.127:8080/group1/M00/00/04/CqoAAlvrjnmAAVSPAAA7O93XiTs298.jpg"
                                                    alt="" width="50"
                                                    height="50"><b></b></li>
                                            <li value="5"><img
                                                    src="http://35.220.246.127:8080/group1/M00/00/04/CqoAAlvrjpqAHJUpAABVhtTJ31M454.jpg"
                                                    alt="" width="50"
                                                    height="50"><b></b></li>
                                            <li value="6"><img
                                                    src="http://35.220.246.127:8080/group1/M00/00/04/CqoAAlvrjqyANGrBAAA5cw7lQq0790.jpg"
                                                    alt="" width="50"
                                                    height="50"><b></b></li>
                                            <li value="7"><img
                                                    src="http://35.220.246.127:8080/group1/M00/00/04/CqoAAlvrjr2ANYMbAABLwKBAMnU269.jpg"
                                                    alt="" width="50"
                                                    height="50"><b></b></li>
                                            <li value="8"><img
                                                    src="http://35.220.246.127:8080/group1/M00/00/04/CqoAAlvrjs2AGMD4AAAy6QZQC7Q512.jpg"
                                                    alt="" width="50"
                                                    height="50"><b></b></li>
                                            <li value="9"><img
                                                    src="http://35.220.246.127:8080/group1/M00/00/04/CqoAAlvrnNiADzi2AAA5vS8RV3M061.jpg"
                                                    alt="" width="50"
                                                    height="50"><b></b></li>
                                            <li value="10"><img
                                                    src="http://35.220.246.127:8080/group1/M00/00/04/CqoAAlvrnPiAY7t_AABG2o5MFJE070.jpg"
                                                    alt="" width="50"
                                                    height="50"><b></b></li>
                                            <li value="11"><img
                                                    src="http://35.220.246.127:8080/group1/M00/00/04/CqoAAlvrnQ2AbS73AAA_k6Ko5yc688.jpg"
                                                    alt="" width="50"
                                                    height="50"><b></b></li>
                                            <li value="12"><img
                                                    src="http://35.220.246.127:8080/group1/M00/00/04/CqoAAlvrnS2ASKy1AAA0VsWvcUM784.jpg"
                                                    alt="" width="50"
                                                    height="50"><b></b></li>
                                            <li value="13"><img
                                                    src="http://35.220.246.127:8080/group1/M00/00/04/CqoAAlvrnVeAYGfDAAA7iUYzUfY529.jpg"
                                                    alt="" width="50"
                                                    height="50"><b></b></li>
                                            <li value="14"><img
                                                    src="http://35.220.246.127:8080/group1/M00/00/04/CqoAAlvrnWeAZ6f6AAA-EDdxPkA960.jpg"
                                                    alt="" width="50"
                                                    height="50"><b></b></li>
                                            <li value="15"><img
                                                    src="http://35.220.246.127:8080/group1/M00/00/04/CqoAAlvrnXqAT8-_AAA7Us7xmKo456.jpg"
                                                    alt="" width="50"
                                                    height="50"><b></b></li>
                                            <li value="16"><img
                                                    src="http://35.220.246.127:8080/group1/M00/00/04/CqoAAlvrnZSAB7akAAA_OOsjDck103.jpg  "
                                                    alt="" width="50"
                                                    height="50"><b></b></li>
                                        </ul>
                                        <div class="btns mt20">
                                            <input id="input" type="button" value="保存">
                                        </div>
                                    </div>
                                </div>
                                <div class="update-rcol">
                                    <div class="smt"><h3>效果预览</h3></div>
                                    <div class="smc">
                                        你上传的图片会自动生成2种尺寸，请注意小尺寸的头像是否清晰
                                        <div class="img-m-cont img-cont">
                                            <div class="img-s">
                                                <img id="midImage" width="100" height="100" name="midImage"
                                                     src="/images/defaultImgs/1.jpg">
                                            </div>
                                        </div>
                                        100*100像素
                                        <div class="img-s-cont img-cont">
                                            <div class="img-s">
                                                <img id="smaImage" width="50" height="50" name="smaImage"
                                                     src="/images/defaultImgs/1.jpg">
                                            </div>
                                        </div>
                                        50*50像素
                                    </div>
                                </div>
                                <div class="clr"></div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
            <div id="left" class="g-3-5 c-0">
                <!--js 加载异步加载的左侧菜单 -->
                <div id="menu"><h3>我的交易</h3>
                    <dl class="fore1">
                        <dt><a target="_blank" clstag="homepage|keycount|home2013|hdd" id="_MYJD_ordercenter"
                               href="http://order.jd.com/center/list.action" class="curr">我的订单</a></dt>
                    </dl>
                    <dl class="fore2">
                        <dt><a target="_blank" clstag="homepage|keycount|home2013|hyushou" id="_MYJD_yushou"
                               href="http://yushou.jd.com/member/qualificationList.action">我的预售</a></dt>
                    </dl>
                    <dl class="fore3">
                        <dt><a target="_blank" clstag="homepage|keycount|home2013|hbdsh" id="_MYJD_locallife"
                               href="http://life.jd.com/localOrder/iniOrder.do">我的本地生活</a></dt>
                    </dl>
                    <dl class="fore4">
                        <dt><a target="_blank" clstag="homepage|keycount|home2013|hdqs" id="_MYJD_ding"
                               href="http://ding.jd.com/plan/showPlans.action">我的定期送</a></dt>
                    </dl>
                    <dl class="fore5">
                        <dt><a target="_blank" clstag="homepage|keycount|home2013|htg" id="_MYJD_tuan"
                               href="http://tuan.jd.com/order/index.php">我的团购</a></dt>
                    </dl>
                    <dl class="fore6">
                        <dt><a target="_blank" clstag="homepage|keycount|home2013|hjg" id="_MYJD_protection"
                               href="http://jiabao.jd.com/protecting">价格保护</a></dt>
                    </dl>
                    <dl class="fore7">
                        <dt class="hc"><b></b><a target="_blank" id="_MYJD_gz" href="#none">我的关注</a></dt>
                        <dd class="fore1">
                            <div class="item" id="_MYJD_product"><a target="_blank"
                                                                    clstag="homepage|keycount|home2013|hgz"
                                                                    href="http://t.jd.com/home/follow">关注的商品</a></div>
                        </dd>
                        <dd class="fore2">
                            <div class="item" id="_MYJD_vender"><a target="_blank"
                                                                   clstag="homepage|keycount|home2013|hdp"
                                                                   href="http://t.jd.com/vender/followVenderList.action">关注的店铺</a>
                            </div>
                        </dd>
                        <dd class="fore3">
                            <div class="item" id="_MYJD_activity"><a target="_blank"
                                                                     clstag="homepage|keycount|home2013|hhd"
                                                                     href="http://t.jd.com/activity/followActivityList.action">关注的活动</a>
                            </div>
                        </dd>
                        <dd class="fore4 last ">
                            <div class="item" id="_MYJD_history"><a target="_blank"
                                                                    clstag="homepage|keycount|home2013|hll"
                                                                    href="http://my.jd.com/history/list.html">浏览历史&nbsp;<img
                                    width="24" height="11" src="/images/myjd-new-ico.png"></a></div>
                        </dd>
                    </dl>
                    <dl class="fore8">
                        <dt class="hc"><b></b><a target="_blank" id="_MYJD_zc" href="#none">我的资产</a></dt>
                        <dd class="fore1">
                            <div class="item" id="_MYJD_cashbox"><a target="_blank"
                                                                    clstag="homepage|keycount|home2013|hjk"
                                                                    href="http://jinku.pay.jd.com/xjk/income.action">我的小金库</a>
                            </div>
                        </dd>
                        <dd class="fore2">
                            <div class="item" id="_MYJD_credit"><a clstag="homepage|keycount|home2013|hbt" tag="213"
                                                                   href="http://baitiao.jd.com/creditUser/record">shop白条</a>&nbsp;
                            </div>
                        </dd>
                        <dd class="fore3">
                            <div class="item" id="_MYJD_tx"><a target="_blank" clstag="homepage|keycount|home2013|htx"
                                                               href="http://mobile.jd.com/yyswt/myjd.do">shop通信</a>
                            </div>
                        </dd>
                        <dd class="fore4">
                            <div class="item" id="_MYJD_balance"><a target="_blank"
                                                                    clstag="homepage|keycount|home2013|hye"
                                                                    href="http://mymoney.jd.com/finance/recently.action">余额</a>
                            </div>
                        </dd>
                        <dd class="fore5">
                            <div class="item" id="_MYJD_ticket"><a target="_blank"
                                                                   clstag="homepage|keycount|home2013|hyh"
                                                                   href="http://quan.jd.com/user_quan.action">优惠券</a>
                            </div>
                        </dd>
                        <dd class="fore6">
                            <div class="item" id="_MYJD_card"><a target="_blank" clstag="homepage|keycount|home2013|he"
                                                                 href="http://giftcard.jd.com/giftcard/index.action">shop卡/E卡</a>
                            </div>
                        </dd>
                        <dd class="fore7 last">
                            <div class="item" id="_MYJD_bean"><a target="_blank" clstag="homepage|keycount|home2013|hjd"
                                                                 href="http://bean.jd.com/myJingBean/list">京豆</a></div>
                        </dd>
                    </dl>
                    <dl class="fore9 last ">
                        <dt class="hc"><b></b><a target="_blank" id="_MYJD_fw" href="#none">客户服务</a></dt>
                        <dd class="fore1">
                            <div class="item" id="_MYJD_repair"><a target="_blank"
                                                                   clstag="homepage|keycount|home2013|hfx"
                                                                   href="http://myjd.jd.com/repair/orderlist.action">返修退换货</a>
                            </div>
                        </dd>
                        <dd class="fore2">
                            <div class="item" id="_MYJD_refundment"><a target="_blank"
                                                                       clstag="homepage|keycount|home2013|hqx"
                                                                       href="http://rps.fm.jd.com/rest/refund/refundList">取消订单记录</a>
                            </div>
                        </dd>
                        <dd class="fore3 last ">
                            <div class="item" id="_MYJD_complaint"><a target="_blank"
                                                                      clstag="homepage|keycount|home2013|htx"
                                                                      href="http://myjd.jd.com/opinion/orderList.action">我的投诉</a>
                            </div>
                        </dd>
                    </dl>
                </div>
                <div id="da-game" class="da-box m"><a
                        href="http://c.nfa.jd.com/adclick?sid=14&amp;cid=720&amp;aid=4497&amp;bid=0&amp;unit=85943&amp;advid=131939&amp;guv=&amp;url=http://wan.jd.com/yeyou/play.html?gameId=86&amp;gateWayId=s40"><img
                        width="100%" src="/images/547e6a57N75c2f016.gif" alt=""></a></div>
                <div id="da-home" class="da-box"><a
                        href="http://c.nfa.jd.com/adclick?sid=2&amp;cid=102&amp;aid=413&amp;bid=8305&amp;unit=65429&amp;advid=166662&amp;guv=&amp;url=http://vivoshop.jd.com"
                        target="_blank"><img width="100%" height="100%" alt="" app="image:poster"
                                             src="/images/549d03d0N59b1f026.jpg"></a></div>
            </div>
            <span class="clr"></span>
        </div>
    </div>
</div>
<script>
    var flag = true;
    var token = window.localStorage.getItem("token");
    console.log(token);
    $(function () {

        $("li").click(function (event) {
            flag = true;
            var src = event.target.src;
            $('#bigImage').attr("src", src);
            $('#midImage').attr("src", src);
            $('#smaImage').attr("src", src);
        });
        $('#SWFUpload_0').click(function () {
            flag = false;
            console.log(flag)
        })

        var setting = {
            url: 'http://localhost:8765/userMessage/findByUid',
            headers: {
                "Authentication": token
            },
            method: 'get'
        };
        $.ajax(setting).done(requestFinished);

        function requestFinished(resp) {
            $('#bigImage').attr("src", resp.imagePath);
            $('#midImage').attr("src", resp.imagePath);
            $('#smaImage').attr("src", resp.imagePath);
        }
    });

    $('#input').click(function () {
        if (flag) {
            var image = $("#bigImage").attr("src");
            console.log(image);
            $.ajax({
                type: "POST",
                url: "http://localhost:8765/userMessage/upFile2",
                // contentType: 'application/json; charset=utf-8',
                headers: {
                    "Authentication": token
                },
                data: {
                    imagePath: image
                },
                success: function (resp) {
                    if (resp) {
                        alert("保存成功")
                    }
                },
                error: function () {
                    alert("保存失败")
                }
            })
            // $.post("http://localhost:8765/userMessage/upFile2", datas, function (resp) {
            //     if (resp) {
            //         alert("保存成功")
            //     } else {
            //         alert("保存失败")
            //     }
            // });
        } else {
            $.ajax({
                type: "POST",
                processData: false,
                contentType: false,
                cache: false,
                headers: {
                    "Authentication": token
                },
                url: "http://localhost:8765/userMessage/upFile",
                data: new FormData($('#tf')[0]),
                success: function (result) {
                    if (result) {
                        alert("提交成功")
                    }
                    ;
                },
                error: function () {
                    alert("提交失败")
                }
            });
        }
    });


    $('#SWFUpload_0').change(function () {
        var objUrl = getObjectUrl(this.files[0]);
        console.log(objUrl);
        if (objUrl) {
            $('#bigImage').attr("src", objUrl);
            $('#midImage').attr("src", objUrl);
            $('#smaImage').attr("src", objUrl);
        }
    });

    function getObjectUrl(file) {
        var url = null;
        if (window.createObjectURL != undefined) { // basic
            url = window.createObjectURL(file);
        } else if (window.URL != undefined) { // mozilla(firefox)
            url = window.URL.createObjectURL(file);
        } else if (window.webkitURL != undefined) { // webkit or chrome
            url = window.webkitURL.createObjectURL(file);
        }
        return url;
    };

    $('input').on('change', function () {
        var value = $(this).val();
        value = value.split("\\")[2];
        alert(value);
    })


</script>

</body>

</html>